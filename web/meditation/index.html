<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>禅定波羅蜜ダッシュボード</title>
    <link rel="stylesheet" href="../static/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>禅定波羅蜜ダッシュボード</h1>

    <!-- Metric Group & Period Selection -->
    <div class="controls">
        <select id="metricGroup" onchange="setMetricGroup(this.value)">
            <option value="duration">Duration</option>
            <option value="power">Power (Alpha/Beta)</option>
            <option value="iaf">IAF</option>
            <option value="focus">Focus (FM Theta/Theta-Alpha)</option>
        </select>
        <button id="btn1W" class="active" onclick="setPeriod('1w')">1 Week</button>
        <button id="btn1M" onclick="setPeriod('1m')">1 Month</button>
        <button id="btn3M" onclick="setPeriod('3m')">3 Months</button>
        <button id="btnAll" onclick="setPeriod('all')">All</button>
    </div>
    <div class="chart-container">
        <h2>Daily View</h2>
        <canvas id="dailyChart"></canvas>
    </div>

    <!-- Trend View -->
    <div class="controls controls-trend">
        <button id="btnWeekly" class="active" onclick="setAggregation('weekly')">Weekly</button>
        <button id="btnMonthly" onclick="setAggregation('monthly')">Monthly</button>
        <span style="margin: 0 10px; color: #999;">|</span>
        <button id="btnHours" class="active" onclick="setUnit('hours')">Hours</button>
        <button id="btnChu" onclick="setUnit('chu')">炷</button>
    </div>
    <div class="chart-container">
        <h2>Trend View</h2>
        <canvas id="trendChart"></canvas>
    </div>

    <script>
        // Dashboard configuration with data
        window.dashboardConfig = {
            rawData: [{"timestamp": "2025-11-20 16:30:01", "duration_min": 19.32, "alpha_mean": 4.81, "beta_mean": -4.38, "iaf_mean": 8.6, "fm_theta_mean": 0.14, "theta_alpha_mean": 0.24}, {"timestamp": "2025-11-21 6:33:47", "duration_min": 29.139, "alpha_mean": 2.44, "beta_mean": -3.56, "iaf_mean": 8.75, "fm_theta_mean": 0.59, "theta_alpha_mean": 0.82}, {"timestamp": "2025-11-24 9:52:13", "duration_min": 14.13, "alpha_mean": 3.95, "beta_mean": -5.02, "iaf_mean": 8.72, "fm_theta_mean": 0.27, "theta_alpha_mean": 0.79}, {"timestamp": "2025-11-25 7:34:58", "duration_min": 14.064, "alpha_mean": 3.29, "beta_mean": -6.32, "iaf_mean": 8.94, "fm_theta_mean": 0.18, "theta_alpha_mean": 0.39}, {"timestamp": "2025-11-25 15:59:08", "duration_min": 10.633, "alpha_mean": 5.51, "beta_mean": -1.04, "iaf_mean": 9.96, "fm_theta_mean": 1.04, "theta_alpha_mean": 0.23}, {"timestamp": "2025-11-26 7:54:52", "duration_min": 14.159, "alpha_mean": 3.44, "beta_mean": -5.75, "iaf_mean": 8.75, "fm_theta_mean": 0.44, "theta_alpha_mean": 0.87}, {"timestamp": "2025-11-27 8:10:54", "duration_min": 19.206, "alpha_mean": 3.06, "beta_mean": -6.27, "iaf_mean": 8.69, "fm_theta_mean": 0.45, "theta_alpha_mean": 0.74}, {"timestamp": "2025-11-28 7:24:07", "duration_min": 26.357, "alpha_mean": 1.61, "beta_mean": -6.79, "iaf_mean": 8.69, "fm_theta_mean": 0.21, "theta_alpha_mean": 0.55}, {"timestamp": "2025-11-29 7:28:17", "duration_min": 39.066, "alpha_mean": 3.48, "beta_mean": -5.44, "iaf_mean": 8.69, "fm_theta_mean": 0.65, "theta_alpha_mean": 0.69}, {"timestamp": "2025-11-30 6:15:09", "duration_min": 17.902, "alpha_mean": 3.27, "beta_mean": -6.44, "iaf_mean": 8.6, "fm_theta_mean": 2.21, "theta_alpha_mean": 0.87}, {"timestamp": "2025-12-01 7:49:40", "duration_min": 23.911, "alpha_mean": 4.53, "beta_mean": -0.93, "iaf_mean": 8.66, "fm_theta_mean": 0.01, "theta_alpha_mean": 0.36}, {"timestamp": "2025-12-01 22:48:14", "duration_min": 13.603, "alpha_mean": 2.25, "beta_mean": -4.2, "iaf_mean": 8.75, "fm_theta_mean": 0.14, "theta_alpha_mean": 0.37}, {"timestamp": "2025-12-02 7:30:34", "duration_min": 29.551, "alpha_mean": 3.7, "beta_mean": -3.95, "iaf_mean": 8.65, "fm_theta_mean": 0.22, "theta_alpha_mean": 0.45}, {"timestamp": "2025-12-03 7:44:25", "duration_min": 33.381, "alpha_mean": 3.38, "beta_mean": -4.08, "iaf_mean": 8.64, "fm_theta_mean": 1.83, "theta_alpha_mean": 1.06}, {"timestamp": "2025-12-04 7:40:03", "duration_min": 29.894, "alpha_mean": 4.45, "beta_mean": -4.64, "iaf_mean": 10.08, "fm_theta_mean": 0.6, "theta_alpha_mean": 0.23}, {"timestamp": "2025-12-05 7:35:28", "duration_min": 30.557, "alpha_mean": 3.57, "beta_mean": -4.59, "iaf_mean": 8.64, "fm_theta_mean": 1.75, "theta_alpha_mean": 0.81}, {"timestamp": "2025-12-06 6:24:12", "duration_min": 36.76, "alpha_mean": 3.19, "beta_mean": -7.42, "iaf_mean": 8.67, "fm_theta_mean": 0.13, "theta_alpha_mean": 0.5}, {"timestamp": "2025-12-08 7:39:33", "duration_min": 30.131, "alpha_mean": 5.74, "beta_mean": -3.7, "iaf_mean": 8.71, "fm_theta_mean": 2.42, "theta_alpha_mean": 1.28}, {"timestamp": "2025-12-09 7:26:30", "duration_min": 34.907, "alpha_mean": 3.14, "beta_mean": -7.71, "iaf_mean": 8.71, "fm_theta_mean": -1.27, "theta_alpha_mean": 0.49}],
            title: "禅定波羅蜜ダッシュボード"
        };
    </script>
    <script src="../static/dashboard.js"></script>
</body>
</html>
